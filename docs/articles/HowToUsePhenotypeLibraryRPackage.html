<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to Use PhenotypeLibrary R Package â€¢ PhenotypeLibrary</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to Use PhenotypeLibrary R Package">
<meta property="og:description" content="PhenotypeLibrary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PhenotypeLibrary</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.11.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/CohortDefinitionsInOhdsiPhenotypeLibrary.html">Cohort Definitions in OHDSI Phenotype Library</a>
    </li>
    <li>
      <a href="../articles/CohortDefinitionSubmissionRequirements.html">Cohort Definition Submission Requirements</a>
    </li>
    <li>
      <a href="../articles/GuidanceOnClinicalDescriptionForConditionPhenotypes.html">Guidance on writing clinical description for Condition Phenotypes</a>
    </li>
    <li>
      <a href="../articles/GuidanceOnCohortDefinitionSetRObject.html">Guidance on Cohort Definition Set R Object</a>
    </li>
    <li>
      <a href="../articles/GuidanceOnLiteratureReview.html">Guidance on literature review</a>
    </li>
    <li>
      <a href="../articles/GuidanceOnPerformingPeerReview.html">Guidance on performing peer review</a>
    </li>
    <li>
      <a href="../articles/GuidanceOnWritingAnEvaluationReport.html">Guidance on writing an evaluation report</a>
    </li>
    <li>
      <a href="../articles/GuidanceOnWritingCohortDefinitionLogicDescription.html">Guidance on writing Cohort Definition Logic Description</a>
    </li>
    <li>
      <a href="../articles/HowToUsePhenotypeLibraryRPackage.html">How to Use PhenotypeLibrary R Package</a>
    </li>
    <li>
      <a href="../articles/ReservedWordsWithSpecialMeaningToPhenotypers.html">Reserved Words With Special Meaning To Phenotypers</a>
    </li>
    <li>
      <a href="../articles/SubmittedCohortDefinitions.html">Submitted Cohort Definitions</a>
    </li>
    <li>
      <a href="../articles/ValidityChecksForCohortDefinitions.html">Validity checks for Cohort Definitions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
<li>
  <a href="https://github.com/OHDSI/PhenotypeLibrary/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>How to Use PhenotypeLibrary R Package</h1>
                        <h4 data-toc-skip class="author">Gowtham A.
Rao</h4>
            
            <h4 data-toc-skip class="date">2023-03-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/PhenotypeLibrary/blob/HEAD/vignettes/HowToUsePhenotypeLibraryRPackage.Rmd" class="external-link"><code>vignettes/HowToUsePhenotypeLibraryRPackage.Rmd</code></a></small>
      <div class="hidden name"><code>HowToUsePhenotypeLibraryRPackage.Rmd</code></div>

    </div>

    
    
<p><a href="https://github.com/OHDSI/PhenotypeLibrary" class="external-link">PhenotypeLibrary</a> is
part of <a href="https://ohdsi.github.io/Hades/" class="external-link">HADES</a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<ul>
<li>This is an installable R-package that may be installed as
follows:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"OHDSI/PhenotypeLibrary"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="retrieval">Retrieval<a class="anchor" aria-label="anchor" href="#retrieval"></a>
</h2>
<ul>
<li>The list of cohort definitions available may be retrieved as
follows:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">PhenotypeLibrary</span><span class="fu">::</span><span class="fu"><a href="../reference/listPhenotypes.html">listPhenotypes</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 208 x 16</span></span></span>
<span><span class="co">#&gt;    cohortId cohor~1 descr~2 createdD~3 modified~4 libra~5 cohor~6 lastM~7 status</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        2 [W] CO~ <span style="color: #949494;">"</span>Statu~ 2021-09-22 2023-03-14 rao@oh~ COVID-~ <span style="color: #BB0000;">NA</span>      Withd~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        3 [P] Co~ <span style="color: #949494;">"</span>Statu~ 2021-09-22 2023-01-03 rao@oh~ Cough ~ <span style="color: #BB0000;">NA</span>      Pendi~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        4 [P] Di~ <span style="color: #949494;">"</span>Statu~ 2021-09-23 2023-01-03 rao@oh~ Diarrh~ <span style="color: #BB0000;">NA</span>      Pendi~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        5 [P] Dy~ <span style="color: #949494;">"</span>Statu~ 2021-09-23 2023-01-03 rao@oh~ Dyspne~ <span style="color: #BB0000;">NA</span>      Pendi~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        6 [P] Fe~ <span style="color: #949494;">"</span>Statu~ 2021-09-23 2023-02-12 rao@oh~ Fever ~ <span style="color: #BB0000;">NA</span>      Pendi~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        7 [P] He~ <span style="color: #949494;">"</span>Statu~ 2021-09-23 2023-02-12 rao@oh~ Headac~ <span style="color: #BB0000;">NA</span>      Pendi~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        8 [P] Al~ <span style="color: #949494;">"</span>Statu~ 2021-09-23 2023-02-12 rao@oh~ Altere~ <span style="color: #BB0000;">NA</span>      Pendi~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        9 [P] So~ <span style="color: #949494;">"</span>Statu~ 2021-09-23 2023-02-12 rao@oh~ Sore t~ <span style="color: #BB0000;">NA</span>      Pendi~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       10 [P] Na~ <span style="color: #949494;">"</span>Statu~ 2021-09-23 2022-12-06 rao@oh~ Nausea~ <span style="color: #BB0000;">NA</span>      Pendi~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>       11 [P] Ma~ <span style="color: #949494;">"</span>Statu~ 2021-09-23 2023-02-12 rao@oh~ Malais~ <span style="color: #BB0000;">NA</span>      Pendi~</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ... with 198 more rows, 7 more variables: logicDescription &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   hashTag &lt;chr&gt;, contributor &lt;chr&gt;, Forum &lt;chr&gt;, addedVersion &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   peer &lt;chr&gt;, Reviewer &lt;lgl&gt;, and abbreviated variable names 1: cohortName,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   2: description, 3: createdDate, 4: modifiedDate, 5: librarian,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   6: cohortNameFormatted, 7: lastModifiedBy</span></span></span></code></pre>
<ul>
<li>You can extract one or more cohort definitions into a
cohortDefinitionSet object as</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohortDefinitionSet</span> <span class="op">&lt;-</span> <span class="fu">PhenotypeLibrary</span><span class="fu">::</span><span class="fu"><a href="../reference/getPlCohortDefinitionSet.html">getPlCohortDefinitionSet</a></span><span class="op">(</span>cohortIds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cohortDefinitionSet</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 x 4</span></span></span>
<span><span class="co">#&gt;   cohortId cohortName                                                json  sql  </span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        2 [W] COVID-19 diagnosis or SARS-CoV-2 test (1pos) (3Ps, 7~ <span style="color: #949494;">"</span>{\n~ <span style="color: #949494;">"</span>CRE~</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>        3 [P] Cough or Sputum (3Pe, 30Era)                          <span style="color: #949494;">"</span>{\n~ <span style="color: #949494;">"</span>CRE~</span></span></code></pre>
<ul>
<li>cohortDefinitionSet is now a data.frame with specifications for the
cohort ids 1, 2 and 3. For cohorts that conform to OHDSI Circe
specifications, the field json is the cohort json specification that may
be posted into your Atlas instance. The SQL is the SQL rendered from the
JSON. For cohorts that do not conform to OHDSI Circe specification, only
the SQL is provided and the json is left empty.</li>
</ul>
</div>
<div class="section level2">
<h2 id="use">Use<a class="anchor" aria-label="anchor" href="#use"></a>
</h2>
<ul>
<li>You can instantiate the cohorts in your environment as follows using
(OHDSI/CohortGenerator)[<a href="https://github.com/OHDSI/CohortGenerator" class="external-link uri">https://github.com/OHDSI/CohortGenerator</a>].</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">connectionDetails</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">DatabaseConnector</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">createConnectionDetails</a></span><span class="op">(</span></span>
<span>    dbms <span class="op">=</span> <span class="st">"postgresql"</span>,</span>
<span>    server <span class="op">=</span> <span class="st">"some.server.com/ohdsi"</span>,</span>
<span>    user <span class="op">=</span> <span class="st">"joe"</span>,</span>
<span>    password <span class="op">=</span> <span class="st">"secret"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">cdmDatabaseSchema</span> <span class="op">&lt;-</span> <span class="st">"cdm_synpuf"</span></span>
<span><span class="va">cohortDatabaseSchema</span> <span class="op">&lt;-</span> <span class="st">"scratch.dbo"</span></span>
<span><span class="va">cohortTables</span> <span class="op">&lt;-</span> <span class="fu">CohortGenerator</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/getCohortTableNames.html" class="external-link">getCohortTableNames</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">CohortGenerator</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/generateCohortSet.html" class="external-link">generateCohortSet</a></span><span class="op">(</span></span>
<span>  connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span>
<span>  cdmDatabaseSchema <span class="op">=</span> <span class="va">cdmDatabaseSchema</span>,</span>
<span>  cohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  cohortTableNames <span class="op">=</span> <span class="va">cohortTables</span>,</span>
<span>  cohortDefinitionSet <span class="op">=</span> <span class="va">cohortDefinitionSet</span></span>
<span><span class="op">)</span></span></code></pre></div>
<ul>
<li>You can also run cohort diagnostics on this cohortDefinitionSet
object as follows:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">databaseId</span> <span class="op">&lt;-</span> <span class="st">"synpuf"</span></span>
<span></span>
<span><span class="va">databaseName</span> <span class="op">&lt;-</span></span>
<span>  <span class="st">"Medicare Claims Synthetic Public Use Files (SynPUFs)"</span></span>
<span></span>
<span><span class="va">databaseDescription</span> <span class="op">&lt;-</span></span>
<span>  <span class="st">"Medicare Claims Synthetic Public Use Files (SynPUFs) were created to allow interested parties to gain familiarity using Medicare claims data while protecting beneficiary privacy. These files are intended to promote development of software and applications that utilize files in this format, train researchers on the use and complexities of Centers for Medicare and Medicaid Services (CMS) claims, and support safe data mining innovations. The SynPUFs were created by combining randomized information from multiple unique beneficiaries and changing variable values. This randomization and combining of beneficiary information ensures privacy of health information."</span></span>
<span></span>
<span><span class="fu">CohortDiagnostics</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortDiagnostics/reference/executeDiagnostics.html" class="external-link">executeDiagnostics</a></span><span class="op">(</span></span>
<span>  cohortDefinitionSet <span class="op">=</span> <span class="va">cohortDefinitionSet</span>,</span>
<span>  exportFolder <span class="op">=</span> <span class="va">outputFolder</span>,</span>
<span>  databaseId <span class="op">=</span> <span class="va">databaseId</span>,</span>
<span>  databaseName <span class="op">=</span> <span class="va">databaseName</span>,</span>
<span>  databaseDescription <span class="op">=</span> <span class="va">databaseDescription</span>,</span>
<span>  cohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  cdmDatabaseSchema <span class="op">=</span> <span class="va">cdmDatabaseSchema</span>,</span>
<span>  connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span>
<span>  cohortTableNames <span class="op">=</span> <span class="va">cohortTableNames</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Gowtham Rao.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
